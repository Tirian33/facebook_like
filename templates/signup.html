<!DOCTYPE html>
<html>
<head>
    <title>Sign Up</title>
    <link rel="stylesheet" type="text/css" href="signup.css">
</head>
<body>
    <div class="container">
        <h2>Sign Up</h2>
        <form action="/api/account" method="post" id="regiForm">
            <div class="form-group">
                <label for="fName">First Name:</label>
                <input type="text" id="fName" name="fName" required>
            </div>
           <div class="form-group">
                <label for="lName">Last name:</label>
                <input type="text" id="lName" name="lName" required>
            </div>
            <div class="form-group">
                <label for="username">User name:</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group">
                <label for="confirmpassword">Confirm Password:</label>
                <input type="password" id="confirmpassword" name="confirmpassword" required>
            </div>
            <div class="form-group">
                <input type="checkbox" id="public" name="public" value="public">
                <label for="publicview"> Do you want your page to be Public</label><br>    
            </div>
            
            <div class="form-group">
                <input type="submit" value="Create Account" id="confButton">
            </div>
        </form>
        <script>
            document.querySelector('#confButton').addEventListener('click', function () {
                //Prevent normal unhandled submit
                event.preventDefault();

                //Confirm that Password & ConfPassword match & are valid (8 characters long)
               if(document.getElementById('password').value != document.getElementById('confirmpassword').value){
                        alert("Please ensure that your Password matches !");
               }
               else if(document.getElementById('password').value.length< 8){
                alert("Password should be atleast 8 characters !");
               }
               else{
               
                //Grab the loginForm element
                var dict = {};
                var loginData = new FormData(document.querySelector('#regiForm'));
                loginData.forEach((value, key) => dict[key] = value);
                //Perform the action of submit button
                fetch('/api/account', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json',},
                    body: JSON.stringify(dict), 
                }).then(function (res){ 
                    if (res.status == 200)
                    {
                        //JWT should be set so lets go to the home page
                        window.location.href = '/home';
                    }
                    else
                    {
                        //Make alert pop up
                        alert('ERRS');
                    }
                }).catch(function(error){
                    //Hopefully we never reach this
                    console.log("ERROR ON REGI:", error);
                })
            }});
        </script>
    </div>
</body>
</html>

<style>
    body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    text-align: center;
}

.container {
    width: 300px;
    margin: 0 auto;
    background: no-repeat;
    padding: 20px;
    margin-top: 50px;
    border-radius: 5px;
    
}

h2 {
    text-align: center;
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 5px;
}

.form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    outline: none;
}

.form-group input[type="checkbox"] {
    width: auto;
    margin-right: 5px;
}

#confButton {
    width: 100%;
    background: #007BFF;
    color: #fff;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
}

#confButton:hover {
    background: #0056b3;
}
</style>
